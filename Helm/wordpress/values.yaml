# Global Settings
global:
  storageClass: "efs-sc"

# WordPress Configuration
wordpress:
  image:
    repository: wordpress
    tag: 6.4-apache
    pullPolicy: IfNotPresent
  
  service:
    type: LoadBalancer
    port: 80
  
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1
      memory: 1Gi

  nodeSelector:
    subnet-type: public

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: subnet-type
                operator: In
                values:
                  - public

  persistence:
    enabled: true
    storageClass: "efs-sc"
    size: 10Gi
    accessMode: ReadWriteMany

# MySQL Configuration
mysql:
  enabled: true
  architecture: replication
  auth:
    rootPassword: ""  # Will be auto-generated if not set
    replicationPassword: ""  # Will be auto-generated if not set
    database: wordpress
    username: wordpress
    password: ""  # Will be auto-generated if not set
  
  primary:
    persistence:
      enabled: true
      storageClass: "efs-sc"
      size: 10Gi
    
    configuration: |-
      [mysqld]
      log-bin=mysql-bin
      binlog-format=ROW
      server-id=1
      log_slave_updates=1
      gtid_mode=ON
      enforce-gtid-consistency=ON
  
  secondary:
    replicaCount: 1
    persistence:
      enabled: true
      storageClass: "efs-sc"
      size: 10Gi
    
    configuration: |-
      [mysqld]
      server-id=2
      super-read-only=1
      log_slave_updates=1
      gtid_mode=ON
      enforce-gtid-consistency=ON

# Storage Configuration
storage:
  efs:
    enabled: true
    fileSystemId: "fs-078a39d601f0ea2b2"
    provisioningMode: "efs-ap"
    directoryPerms: "777"